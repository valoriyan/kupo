FROM node:18.12.1

ARG API_BASE_URL
ENV API_BASE_URL=$API_BASE_URL

ARG NETWORK_PORTAL_ID
ENV NETWORK_PORTAL_ID=$NETWORK_PORTAL_ID

WORKDIR /app

COPY package.json package.json
COPY yarn.lock yarn.lock
RUN yarn install

COPY . .

RUN API_BASE_URL=$API_BASE_URL NETWORK_PORTAL_ID=$NETWORK_PORTAL_ID yarn build

CMD [ "yarn", "start" ]
